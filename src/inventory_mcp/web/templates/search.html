{% extends "base.html" %}

{% block title %}Search - Inventory{% endblock %}

{% block content %}
<div class="p-4 lg:p-6">
    <!-- Search Header -->
    <div class="max-w-2xl mx-auto mb-8">
        {% if not query %}
        <h1 class="text-2xl lg:text-3xl font-bold text-fynbos-900 text-center mb-6">
            Find Your Items
        </h1>
        {% endif %}

        <!-- Search Form -->
        <form hx-get="/partials/search"
              hx-trigger="input changed delay:300ms from:#search-input, submit"
              hx-target="#search-results"
              hx-indicator="#search-indicator">
            <div class="relative">
                <input type="text"
                       name="q"
                       id="search-input"
                       value="{{ query }}"
                       placeholder="Search inventory..."
                       autocomplete="off"
                       class="w-full pl-12 pr-4 py-4 text-lg border border-fynbos-200 rounded-xl bg-white
                              focus:ring-2 focus:ring-protea-400 focus:border-transparent
                              placeholder-fynbos-400 text-fynbos-900 shadow-sm">
                <svg class="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-fynbos-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                </svg>
            </div>
        </form>

        <!-- Loading Indicator -->
        <div id="search-indicator" class="htmx-indicator text-center mt-4">
            <span class="text-fynbos-500">Searching...</span>
        </div>
    </div>

    <!-- Search Results -->
    <div id="search-results" class="max-w-4xl mx-auto">
        {% if results %}
            {% include "partials/search_results.html" %}
        {% elif query %}
            <p class="text-center text-fynbos-500 py-8">No items found for "{{ query }}"</p>
        {% else %}
            <!-- Empty state -->
            <div class="text-center py-12">
                <svg class="w-16 h-16 mx-auto text-fynbos-300 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"/>
                </svg>
                <p class="text-fynbos-500 text-lg">Start typing to search your inventory</p>
                <p class="text-fynbos-400 mt-2">Search by item name, description, or location</p>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}
